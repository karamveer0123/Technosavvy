function BarLoad(s) { $("#Three").css("color", "lime"), console.log(s[0]), $("#Three").html(GetBarTable(s)), console.log(s) } function MarketLoad(s) { console.log(s) } function GetBarTable(s) { var t = s.length, c = "", e = ""; if (t > 0) { c = '<table class="table table-responsive">', c += '<thead class="trasaction-table-title">', c += '<tr><th class="css566-table-text"><div class="name-css46"><span>Code</span></div></th>', c += '<th class="css566-table-text"><div class="price-css46"><span>Type</span></div></th>', c += '<th class="css566-table-text"><div class="price-css46"><span>Time</span></div></th>', c += '<th class="css566-table-text"><div class="price-css46"><span>Stamp</span></div></th>', c += '<th class="css566-table-text"><div class="change24-css46"><span>Open</span></div></th>', c += '<th class="css566-table-text"><div class="volume-css46"><span>High</span></div></th>', c += '<th class="css566-table-text"><div class="volume-css46"><span>Low</span></div></th>', c += '<th class="css566-table-text"><div class="volume-css46"><span>Close</span></div></th>', c += '<th class="css566-table-text"><div class="volume-css46"><span>Volume</span></div></th>', c += '<th class="css566-table-text"><div class="volume-css46"><span>Value</span></div></th>', c += '<th class="css566-table-text"><div class="volume-css46"><span>Cashback</span></div></th>', c += "</tr></thead>"; for (let c = 0; c < t; c++) { var n = new Date(0); n.setUTCSeconds(s[c].time); n.toUTCString(); e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e += '<tbody class="trasaction-table">') + '<tr><td><div class="coin-name-css46">' + s[c].code + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].type + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].time + "</div></td>") + '<td><div class="coin-24change-css46">' + n + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].open + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].high + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].low + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].close + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].volume + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].tradesValue + "</div></td>") + '<td><div class="coin-24change-css46">' + s[c].cashBack + "</div></td>", e += "</tr></tbody>" } c = c + e + "</div>" } return c } var connection; $.get(MktAPI + "GetMarketSummary", (s => MarketLoad(s))), $.get(MktAPI + "GetCurrencies", (s => CurrenciesLoad(s))); var isClosing = !1; async function SetCon(s) { (connection = (new signalR.HubConnectionBuilder).withUrl(s, { skipNegotiation: !0, transport: signalR.HttpTransportType.WebSockets }).build()).onclose((async () => { await Start() })), connection.on("UpdateMarket", (function (s) { updateTMS(s) })), connection.on("UpdateAllMarkets", (function (s) { console.log("UpdateAllMarkets->"), console.log(s) })), connection.on("UpdateTrades", (function (s) { console.log("received.."), updateTrades(s) })), connection.on("UpdateOrders", (function (s) { updateOrders(s) })), connection.on("UpdateTradingCashback", (function (s) { updateCB(s) })), connection.on("CurrencyValUpdate1", (function (s) { console.log("CurrencyValUpdate->"), console.log(s) })), connection.on("TokenValUpdate1", (function (s) { console.log("TokenValUpdate->"), console.log(s) })), connection.on("TokenSummary", (function (s) { console.log("TokenSummary->"), console.log(s) })), connection.on("LogReceiver", (function (s) { console.log("LogReceiver->"), console.log(s) })) } async function Start() { try { console.log("attempting to connect.."), connection.start(), console.log("Connected successfully") } catch (s) { console.log(s), setTimeout(start, 5e3) } } function LogData(s) { JSON.parse(s) }