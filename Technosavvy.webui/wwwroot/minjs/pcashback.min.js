loadFormatAll(); var MarketArr = [], CashbackMarketArr = [], CashbackArr = []; function loadCashBack() { $.get(MktAPI + "GetCurrentCashBackCycle", (a => cashbackShowData(a))) } function cashbackShowData(a) { var t = ""; t += '<div class="col-detnavtop">', t += '<div class="col-detnav">', t += '<span><img src="images/nav-icon.png"> </span>', t += '<div class="cssnavpr44"><span class="pricecss33-text">', a.TechnoSavvyPrice > a.TechnoSavvyFloorPrice ? t += '<span class="dyCur" data-oval="' + a.TechnoSavvyPrice + '">' + GetFormatedValAdjWithSep(a.TechnoSavvyPrice, __nf) + "</span>" : t += '<span class="dyCur" data-oval="' + a.TechnoSavvyFloorPrice + '">' + GetFormatedValAdjWithSep(a.TechnoSavvyFloorPrice, __nf) + "</span>", t += '</span><div class="colfloor77">Floor Price: <span class="dyCur" data-oval="' + a.TechnoSavvyFloorPrice + '">' + GetFormatedValAdjWithSep(a.TechnoSavvyFloorPrice, __nf) + "</span> </div>", t += "</div>", t += "</div>", t += "</div>", t += '<div class="col-cashnav">', t += '<span class="colcash77"> Cashback</span>', t += '<span class="colamoun77">24h: <span class="dyCur" data-oval="' + a.cashBack24H + '">' + GetFormatedValAdjWithSep(a.cashBack24H, __nf) + "</span></span>", t += '<span class="colamoun77">YTD: <span class="dyCur" data-oval="' + a.cashBackYTD + '">' + GetFormatedValAdjWithSep(a.cashBackYTD, __nf) + "</span></span>", t += "</div>", $("#cashbackNavTop").html(t) } function buildMarkets(a) { console.log("market data", a), a.length <= 0 || a.forEach((function (a) { MarketArr.push({ name: a.name, base: a.base, quote: a.quote }) })) } function cashbackMarket(a) { var t = MarketArr; a.length <= 0 || (a.forEach((function (a, e) { CashbackMarketArr.push({ market: a.market, current: a.current, ytd: a.ytd, name: t[e].name, base: t[e].base, quote: t[e].quote }) })), cashBackTableData(CashbackMarketArr)) } function cashBackTableData(a) { $("#cashBackTable tbody tr").remove(), console.log("data", a); var t = ""; a.forEach((function (a) { t += '<tr><td><div class="coin-name-css46 ">', t += '<span><img src="../images/coin/coin/' + a.base.toUpperCase() + '.png" width="18" class="z-top"></span>', t += '<span class="paircoin-img"><img width="16" src="../images/coin/coin/' + a.quote.toUpperCase() + '.png"></span>', t += "<span>" + a.name + "</span></div></td>", t += '<td><span class="dyCurLen" data-oval="' + a.current + '">' + GetFormatedCurrencyMBTQ(a.current) + "</span></td>", t += '<td><span class="dyCurLen" data-oval="' + a.ytd + '">' + GetFormatedCurrencyMBTQ(a.ytd) + "</span></td>", t += "</tr>" })), $("#cashBackTable tbody").html(t) } $.get(MktAPI + "GetMarketSummary", (a => { buildMarkets(a) })), $.get(MktAPI + "CashbackOfMarkets", (a => { cashbackMarket(a) })), loadCashBack(), setInterval((() => { loadCashBack() }), 6e4); var option, dom = document.getElementById("cashback"), myChart = echarts.init(dom, null, { renderer: "svg", useDirtyRect: !1 }), app = {}; function cahsbackChart() { var a = [], t = []; $.ajax({ url: MktAPI + "Cashback", method: "GET", headers: { Accept: "application/json; odata=nometadata" }, success: function (e) { var s = e.slice(0, 50); s.length <= 0 || (s.forEach((e => { var s = e.cashBackYTD, n = moment(e.cBeventEnd).format("DD-MMM"); a.push(s), t.push(n) })), console.log("LineChart", a), console.log("LineChartTime", t), function (a, t) { var e = { xAxis: { type: "category", nameLocation: "center", splitLine: { show: !1 }, data: t }, series: [{ name: "Cashback", type: "line", data: a }] }; myChart.setOption(e) }(a, t)) }, error: function (a) { console.log("data error", a) } }) } (option = { title: { left: "center" }, tooltip: { trigger: "item", formatter: "{a} <br/>{b} : {c}" }, xAxis: { type: "category", nameLocation: "center", splitLine: { show: !1 }, data: [] }, grid: { left: "3%", right: "4%", bottom: "6%", containLabel: !0 }, yAxis: { type: "log", minorSplitLine: { show: !1 } }, series: [{ name: "Cashback", type: "line", data: [] }] }) && "object" == typeof option && myChart.setOption(option), window.addEventListener("resize", myChart.resize), cahsbackChart();