function LoadOrdersHist() { for (var e = myOrders, a = "", t = e.length, r = 0; r < t; r++) { var d = e[r], i = d.PlacedOn, n = moment.utc(new Date).diff(i, "days"); console.log("days", n), a += '<tr data-pair="' + d.MarketCode.toLowerCase() + '" data-days="' + n + '" data-type="' + d.OrderTypeT + '" data-side="' + d.OrderSideT + '">', a += "    <td>" + d.MarketName + "</td>", a += '   <td class="text-left"><div class="datereward44">', a += "        <span> " + new moment.utc(d.PlacedOn).local().format("LL") + ' </span> <span> <small class="me-0"> ' + new moment.utc(d.PlacedOn).local().format("LTS") + "</small></span></div> </td>", a += '   <td> <span class="d-inline-block opencss11" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="' + d.InternalOrderID + '" data-bs-original-title="" title="">' + d.InternalOrderID.split("-")[0].toUpperCase() + "..</span>  </td>", a += "    <td>" + d.OrderTypeT + "</td>", "Buy" == d.OrderSide ? a += '   <td><span class="basegreen">' + d.OrderSideT + "</span> </td>" : a += '   <td><span class="basered">' + d.OrderSideT + "</span> </td>", a += '   <td> <div class="datettrade44">' + GetFormatedVal(d.Price, _fsl) + " <small> " + d.QuoteTokenCodeName + " </small></div></td>", a += '    <td> <div class="datettrade44">' + GetFormatedVal(d.OriginalVolume, _fsl) + " <small>" + d.BaseTokenCodeName + "</small></div></td>", a += '   <td nowrap="nowrap"> <div class="datettrade44">' + GetFormatedVal(d.ProcessedVolume, _fsl) + "<small> " + d.BaseTokenCodeName + "</small></div></td>", a += '    <td> <div class="datettrade44">' + GetFormatedVal(d.OriginalVolume * d.Price, _fsl) + " <small> " + d.QuoteTokenCodeName + "</small></div></td>", d._OrderAssetAmount > 0 ? a += '<td><div class="dflex22"><span> ' + GetFormatedVal(d.OriginalVolume, _fsl) + "</span>  <small>  " + d.BaseTokenCodeName + " </small></div></td>" : a += '<td><div class="dflex22"><span class="me-0"> -- </span>  <small>  ' + d.BaseTokenCodeName + " </small></div></td>", a += '    <td nowrap="nowrap"> <div class="datettrade44">' + d._OrderSwapTradeValue + " <small> USDT</small></div></td>", d.Trigger > 0 ? a += "    <td>" + d.Trigger + " </td>" : a += "    <td>N/A </td>", a += '<td nowrap="nowrap"> ' + d.StatusT + "</td></tr>" } $("#tbOrderHist").html(a), $("#orderHistoryTable").simplePagination({ items_per_page: 10 }), ApplySearch(), sortTableOrder() } function ApplySearch() { $("#orderHistoryTable table tfoot").hide(), $(".market-search").each((function () { var e = $(this).attr("data-tab"); $(this).on("keyup", (function () { var a = $(this).val().replace(/\s/g, "").toLowerCase(), t = "#" + e + " tr", r = $("#" + e), d = $(t).filter((function () { return $(this).text().toLowerCase().indexOf(a) > -1 })); d.length > 0 ? ($(r).nextAll("tfoot").hide(), $(".my-navigation").show()) : ($(r).nextAll("tfoot").show(), $(".my-navigation").hide(), $(r).parent().parent().children(".trasaction-table").hide()), $(t).hide(), d.show() })), $(".market-search").on("search", (function () { $(".market-search").val(""), $(".market-search").trigger("keyup") })) })) } function orderNotFound() { $("#orderHistoryTable  tfoot").hide(), 0 == myOrders.length ? setInterval((function () { $("#tbOrderHist").hide(), $("#orderHistoryTable tfoot").show() }), 0) : LoadOrdersHist() } orderNotFound(); var Pair = [], Side = [], OrderType = []; function filterOrders() { var e = myOrders; if (0 == e.length && $(".my-select2").chosen({ width: "100%" }), e.length <= 0) return; e.forEach((function (e) { jQuery.inArray(e.MarketCode, Pair) <= -1 && Pair.push(e.MarketCode), jQuery.inArray(e.OrderSide, Side) <= -1 && Side.push(e.OrderSide), jQuery.inArray(e.OrderType, OrderType) <= -1 && OrderType.push(e.OrderType) })); let a = Pair.filter(((e, a, t) => t.indexOf(e) === a)); console.log("uniqueArray", a); let t = Side.filter(((e, a, t) => t.indexOf(e) === a)); console.log("uniqueArray", t); let r = OrderType.filter(((e, a, t) => t.indexOf(e) === a)); console.log("uniqueArray", r); for (var d = Pair.length, i = "", n = 0; n < d; n++) { var o = Pair[n]; 0 == n && (i += '<option value="" selected>All</option>'), i += '<option value="' + o + '">' + o + "</option>" } $("#fPair").html(i), $("#fPair").chosen({ width: "100%" }); var s = Side.length, l = ""; for (n = 0; n < s; n++) { var p = Side[n]; 0 == n && (l += '<option value="" selected>All</option>'), l += '<option value="' + p + '">' + p + "</option>" } $("#fSide").html(l); var h = OrderType.length, m = ""; for (n = 0; n < h; n++) { var c = OrderType[n]; 0 == n && (m += '<option value="" selected>All</option>'), m += '<option value="' + c + '">' + c + "</option>" } $("#fOrderType").html(m), $("#fOrderType").chosen({ width: "100%" }), filterData(), LoadOrdersHist() } function filterData() { $("#fPair").on("change", (function (e) { var a = e.target.value.toLowerCase(); console.log("location", a); var t = $("#tbTrades-Main table tbody"); a.length ? (t.find('tr[data-pair!="' + a + '"]').hide(), t.find('tr[data-pair="' + a + '"]').show(), $(".my-navigation").hide()) : (t.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), a.length, $(".my-navigation").show()) })), $("#fSide").on("change", (function (e) { var a = e.target.value, t = $("#tbTrades-Main table tbody"); a.length ? (t.find('tr[data-side!="' + a + '"]').hide(), t.find('tr[data-side="' + a + '"]').show(), $(".my-navigation").hide()) : (t.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), a.length, $(".my-navigation").show()) })), $("#fOrderType").on("change", (function (e) { var a = e.target.value, t = $("#tbTrades-Main table tbody"); a.length ? (t.find('tr[data-type!="' + a + '"]').hide(), t.find('tr[data-type="' + a + '"]').show(), $(".my-navigation").hide()) : (t.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), a.length, $(".my-navigation").show()) })), $("#fPeriod").on("change", (function (e) { var a = e.target.value, t = $("#tbTrades-Main table tbody"); a.length ? (t.find('tr[data-days!="' + a + '"]').hide(), t.find('tr[data-days="' + a + '"]').show(), $(".my-navigation").hide()) : (t.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), a.length, $(".my-navigation").show()) })) }