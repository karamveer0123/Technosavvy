$.get(MktAPI + "GetMarketSummary", (t => { buildOthersMarkets(t) })); var MarketsTrade = [], MarketQuote = [], MarketBase = [], MarketCoin = []; function buildOthersMarkets(t) { console.log("data", t), t.length <= 0 || (t.forEach((function (t) { jQuery.inArray(t.quote, MarketQuote) <= -1 && MarketQuote.push(t.quote), jQuery.inArray(t.base, MarketBase) <= -1 && MarketBase.push(t.base), MargeCoin = MarketQuote.concat(MarketBase), MarketCoin = MargeCoin.filter(((t, e) => MargeCoin.indexOf(t) === e)), MarketsTrade.push({ name: t.name, code: t.mCode, base: t.base, quote: t.quote, high: t.highest24H, low: t.lowest24H, cat: t.category, price: t.value, volume: t.volume, change: t.change, cashback: t.cashBackYTD, poly: t.poly24Hr, marketCap: t.marketCap }) })), tradeQuoteList(t), tradeQuoteMarketList(t), searchMarketCoin(t), priceLiveMarket(t)) } function tradeQuoteList(t) { var e = ""; $("#eventmark44").html(""), e += '<li class="nav-item">', e += '<a class="nav-link" data-bs-toggle="tab" href="#star11"><i class="fa fa-star"></i></a>', e += "</li>", MarketQuote.forEach((function (t, a) { e += '<li class="nav-item">', e += '<a class="nav-link" data-bs-toggle="tab" href="#' + t + '">' + t + " </a>", e += "</li>", $("#eventmark44").html(e), $("#eventmark44 .nav-item:nth-child(2) .nav-link").addClass("active") })) } function tradeQuoteMarketList(t) { txt = "", txt2 = "", $("#otherMarketList").html(""), MarketQuote.forEach((function (t) { console.log("d", t), txt += '<div id="star11" class="tab-pane pe-1"><table class="row-divtr4 table-responsive w-100"></table></div>', txt += '<div id="' + t + '" class="tab-pane pe-1">', txt += '<table class="row-divtr4 table-responsive w-100">', MarketsTrade.forEach((function (e) { t == e.quote && (txt += "<tr>", txt += '<td><a  href="/trade?cat=trade&t=' + e.base + '&q=usdt" traget="_blank" class="linkColor"><span> ' + e.name + " </span></a>", txt += "</td>", 0 <= e.change ? (txt += '<td class="green">' + GetFormatedValWithSep(e.price, _fsl) + " </td>", txt += '<td class="green">' + GetPercentFormat(e.change, 2) + "</td>") : (txt += '<td class="red">' + GetFormatedValWithSep(e.price, _fsl) + "</span> </td>", txt += '<td class="red">' + GetPercentFormat(e.change, 2) + "</td>"), txt += "</tr>") })), txt += "</table>", txt += "</div>", $("#otherMarketList").html(txt), $("#otherMarketList .tab-pane:nth-child(2)").addClass("active show") })), 0 == favList.length ? (txt2 += '<tr><td colspan="3" class="text-white text-center"><div class="pt-4"><img src="../images/no-data.png" width="30"><p class="p-noRecords"> No records found</p></div></td></tr>', $("#otherMarketList #star11 table").html(txt2)) : MarketsTrade.forEach((function (t) { favList.indexOf(t.code.toLowerCase()) > -1 && (txt2 += "<tr>", txt2 += '<td><span class="cssact-star22"><a  href="/trade?cat=trade&t=' + t.base + '&q=usdt" traget="_blank" class="linkColor"><i class="fa fa-star  active"></i></span><span> ' + t.name + " </span></a>", txt2 += "</td>", 0 <= t.change ? (txt2 += '<td class="green">' + GetFormatedValWithSep(t.price, _fsl) + "</td>", txt2 += '<td class="green">' + GetPercentFormat(t.change, 2) + "</td>") : (txt2 += '<td class="red">' + GetFormatedValWithSep(t.price, _fsl) + "</td>", txt2 += '<td class="red">' + GetPercentFormat(t.change, 2) + "</td>"), txt2 += "</tr>"), $("#otherMarketList #star11 table").html(txt2) })) } function SearchMarketByCoin() { $(".selectOtherMarket").hide(), $("#searchMarketByCoin").on("change", (function () { "Select Coin" == $(this).val() || "" == $(this).val() ? ($(".onLoadedOtherMarket").show(), $(".selectOtherMarket").hide()) : ($(".onLoadedOtherMarket").hide(), $(".selectOtherMarket").show()); var t = $(this).val().toUpperCase(); txt = "", $("#selectOtherMarketList table").html(""), MarketsTrade.forEach((function (e) { e.quote.toUpperCase() != t && e.base.toUpperCase() != t || (txt += '<tr data-base="' + e.base + '" data-quote="' + e.quote + '">', txt += '<td><span class="cssact-star22"><a href="/trade?cat=trade&t=' + e.base + '&q=usdt" traget="_blank" class="linkColor">', favList.indexOf(e.code.toLowerCase()) > 0 && (txt += '<i class="fa fa-star  active"></i>'), txt += "</span><span> " + e.name + " </span></a > ", txt += "</td>", 0 <= e.change ? (txt += '<td class="green">' + GetFormatedValWithSep(e.price, _fsl) + "</td>", txt += '<td  class="green">' + GetPercentFormat(e.change, 2) + "</td>") : (txt += '<td class="red">' + GetFormatedValWithSep(e.price, _fsl) + "</td>", txt += '<td class="red">' + GetPercentFormat(e.change, 2) + "</td>"), txt += "</tr>"), $("#selectOtherMarketList table").html(txt) })) })) } function searchMarketCoin(t) { $("#searchbox435").html(""); var e = ""; e += '<select id="searchMarketByCoin" class="my-select" aria-label="Default select example" style="display: none;">', e += "<option selected>Select Coin</option>", MarketCoin.forEach((function (t) { e += '<option data-img-src="../images/coin/coin/' + t.toUpperCase() + '.png">' + t + "</option>" })), e += "</select>", $("#searchbox435").html(e), selectDropdown(), SearchMarketByCoin() } function selectDropdown() { $("#searchMarketByCoin").chosen({ width: "100%" }) } const $menu = $(".trade-light-icon"), onMouseUp = t => { $menu.is(t.target) || 0 !== $menu.has(t.target).length || $menu.removeClass("is-active") }; function priceLiveMarket(t) { $("#priceLiveMarket").html(""); var e = t.sort((function (t, e) { return new Date(e.change) - new Date(t.change) })); txt = ""; var a = 1; e.forEach((function (t) { a <= 3 && (txt += "<li><span>" + t.name + "</span>", 0 <= t.change ? (txt += '<span class="green">' + GetPercentFormat(t.change, 2) + "</span>", txt += '<span class="green"> ' + GetFormatedValWithSep(t.value, __qf) + "</span >") : (txt += '<span class="red">' + GetPercentFormat(t.change, 2) + "</span>", txt += '<span class="red"> ' + GetFormatedValWithSep(t.value, __qf) + "</span >"), txt += "</li > ", a++) })), $("#priceLiveMarket").html(txt) } $(".sidebarIconToggle").on("click", (() => { $menu.toggleClass("is-active").promise().done((() => { $menu.hasClass("is-active") ? $(document).on("mouseup", onMouseUp) : $(document).off("mouseup", onMouseUp) })) }));