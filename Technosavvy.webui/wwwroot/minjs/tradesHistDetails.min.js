function LoadTrades() { for (var e = myTrades, t = "", a = e.length, r = 0; r < a; r++) { var d = e[r], i = d.PlacedOn, n = moment.utc(new Date).diff(i, "days"); console.log("days", n), t += '<tr data-pair="' + d.MarketCode.toLowerCase() + '" data-days="' + n + '" data-type="' + d.OrderTypeT + '" data-side="' + d.OrderSideT + '">', t += "    <td>" + d.MarketCode + "</td>", t += '   <td class="text-left"><div class="css5datet44">', t += "        <span> " + new moment.utc(d.dateTimeUTC).local().format("LL") + " </span> <span> <small> " + new moment.utc(d.dateTimeUTC).local().format("LTS") + "</small></span></div> </td>", t += '   <td> <span class="d-inline-block opencss11" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="' + d.TradeId + '" data-bs-original-title="" title="">' + d.TradeId.split("-")[0].toUpperCase() + "..</span>  </td>", "Buy" == d.OrderSide ? t += '    <td class="basegreen">' + d.OrderSideT + "</td>" : t += '    <td class="basered">' + d.OrderSideT + "</td>", t += "    <td>" + d.OrderTypeT + "</td>", t += "   <td>" + GetFormatedVal(d.TradePrice, 6) + " <small> " + d.MarketCode.split("/")[1] + " </small></td>", t += "    <td>" + GetFormatedVal(d.TradeVolumn, 6) + " <small>" + d.MarketCode.split("/")[0] + "</small></td>", t += '   <td nowrap="nowrap">' + GetFormatedVal(d.TradeValue, 6) + "<small> " + d.MarketCode.split("/")[1] + "</small></td>", t += "    <td>N/A </td>", t += "    <td>N/A </td>", t += "    <td>N/A </td>", t += "    <td>N/A </td>", t += '   <td> <span class="d-inline-block opencss11" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="' + d.OrderID + '" data-bs-original-title="" title="">' + d.OrderID.split(".")[2] + "-" + d.OrderID.split(".")[3] + "</span>  </td>" } $("#tbTrades").html(t), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), ApplySearch() } function ApplySearch() { $("#tbTrades-Main table tfoot").hide(), $(".market-search").each((function () { var e = $(this).attr("data-tab"); $(this).on("keyup", (function () { var t = $(this).val().replace(/\s/g, "").toLowerCase(), a = "#" + e + " tr", r = $("#" + e), d = $(a).filter((function () { return $(this).text().toLowerCase().indexOf(t) > -1 })); d.length > 0 ? ($(r).nextAll("tfoot").hide(), $(".my-navigation").show()) : ($(r).nextAll("tfoot").show(), $(".my-navigation").hide(), $(r).parent().parent().children(".trasaction-table").hide()), $(a).hide(), d.show() })), $(".market-search").on("search", (function () { $(".market-search").val(""), $(".market-search").trigger("keyup") })) })) } function orderNotFound() { $("#tbTrades-Main  tfoot").hide(), 0 == myTrades.length ? setInterval((function () { $("#tbTrades").hide(), $("#tbTrades-Main tfoot").show() }), 3e3) : LoadTrades() } orderNotFound(); var Pair = [], Side = [], OrderType = []; function filterOrders() { var e = myTrades; if (0 == e.length && $(".my-select2").chosen({ width: "100%" }), e.length <= 0) return; e.forEach((function (e) { jQuery.inArray(e.MarketCode, Pair) <= -1 && Pair.push(e.MarketCode), jQuery.inArray(e.OrderSide, Side) <= -1 && Side.push(e.OrderSide), jQuery.inArray(e.OrderType, OrderType) <= -1 && OrderType.push(e.OrderType) })); let t = Pair.filter(((e, t, a) => a.indexOf(e) === t)); console.log("uniqueArray", t); let a = Side.filter(((e, t, a) => a.indexOf(e) === t)); console.log("uniqueArray", a); let r = OrderType.filter(((e, t, a) => a.indexOf(e) === t)); console.log("uniqueArray", r); for (var d = Pair.length, i = "", n = 0; n < d; n++) { var o = Pair[n]; 0 == n && (i += '<option value="" selected>All</option>'), i += '<option value="' + o + '">' + o + "</option>" } $("#fPair").html(i), $("#fPair").chosen({ width: "100%" }); var s = Side.length, l = ""; for (n = 0; n < s; n++) { var p = Side[n]; 0 == n && (l += '<option value="" selected>All</option>'), l += '<option value="' + p + '">' + p + "</option>" } $("#fSide").html(l); var h = OrderType.length, c = ""; for (n = 0; n < h; n++) { var f = OrderType[n]; 0 == n && (c += '<option value="" selected>All</option>'), c += '<option value="' + f + '">' + f + "</option>" } $("#fOrderType").html(c), $("#fOrderType").chosen({ width: "100%" }), filterData(), LoadTrades(), sortTableOrder() } function filterData() { $("#fPair").on("change", (function (e) { var t = e.target.value.toLowerCase(); console.log("location", t); var a = $("#tbTrades-Main table tbody"); t.length ? (a.find('tr[data-pair!="' + t + '"]').hide(), a.find('tr[data-pair="' + t + '"]').show(), $(".my-navigation").hide()) : (a.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), t.length, $(".my-navigation").show()) })), $("#fSide").on("change", (function (e) { var t = e.target.value, a = $("#tbTrades-Main table tbody"); t.length ? (a.find('tr[data-side!="' + t + '"]').hide(), a.find('tr[data-side="' + t + '"]').show(), $(".my-navigation").hide()) : (a.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), t.length, $(".my-navigation").show()) })), $("#fOrderType").on("change", (function (e) { var t = e.target.value, a = $("#tbTrades-Main table tbody"); t.length ? (a.find('tr[data-type!="' + t + '"]').hide(), a.find('tr[data-type="' + t + '"]').show(), $(".my-navigation").hide()) : (a.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), t.length, $(".my-navigation").show()) })), $("#fPeriod").on("change", (function (e) { var t = e.target.value, a = $("#tbTrades-Main table tbody"); t.length ? (a.find('tr[data-days!="' + t + '"]').hide(), a.find('tr[data-days="' + t + '"]').show(), $(".my-navigation").hide()) : (a.find("tr").show(), $("#tbTrades-Main").simplePagination({ items_per_page: 10 }), t.length, $(".my-navigation").show()) })) }